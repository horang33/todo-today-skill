---
name: todo-today
description: 오늘의 할일을 정리하고 우선순위별로 안내하는 스킬. 사용자가 "오늘 할일", "today", "할일 정리", "오늘 뭐해야 해", "투두", "할일 알려줘" 등을 말하면 트리거. 노션 데이터베이스, 슬랙 메시지, 구글 캘린더, 사용자 직접 입력에서 할일을 수집하여 우선순위순으로 정리해서 보여줌.
---

# 오늘의 할일 정리 스킬

## 실행 순서

1. **어제 할일 확인** - 대화 기록에서 어제 할일 목록 검색
2. **진행 상황 추적** - 노션 수정 이력 기반 자동 체크
3. **오늘 할일 수집** - 각 소스에서 오늘 관련 할일 수집
4. **미확인 항목 질문** - 자동 추적 안 된 항목은 사용자에게 질문
5. **통합 정리 및 출력** - 우선순위별로 분류하여 안내

## 어제 할일 추적 방법

### 1단계: 어제 할일 목록 불러오기
- `conversation_search` 도구로 "오늘 할일", "todo-today" 관련 어제 대화 검색
- 어제 출력된 할일 목록 파싱

### 2단계: 자동 완료 체크

**A. 캘린더 이벤트 기반 (가장 확실)**
- 어제 캘린더 이벤트 조회 (`list_gcal_events`로 어제 날짜 검색)
- 어제 할일 목록과 캘린더 이벤트 제목 매칭
- **과거 날짜 이벤트 = 완료로 자동 간주**
- 예: "김대리 미팅" ↔ 캘린더 "프로젝트 킥오프 - 김대리" → ✅

**B. 노션 수정 이력 기반 (할일별 키워드 검색)**
- **어제 할일 목록에서 키워드 추출** (이름, 프로젝트명, 도메인)
- 각 키워드로 개별 노션 검색 실행
- 예시:
  | 어제 할일 | 검색 키워드 |
  |----------|------------|
  | 김대리 미팅 | `프로젝트 미팅`, `김대리`, `킥오프` |
  | 분기 보고서 작성 | `분기 보고서`, `Q1 리포트` |
  | 팀 워크숍 준비 | `워크숍`, `팀빌딩` |
- 검색된 문서 중 어제~오늘 수정된 것 확인 → ✅ 자동 체크
- ⚠️ 한 가지 키워드로만 검색하면 안 됨! 할일별로 관련 키워드 여러 개로 검색

**C. 슬랙 활동 기반**
- 어제 슬랙에서 관련 키워드 언급 여부 확인

### 3단계: 수동 확인 (대화로 체크)
- 자동 매칭 안 된 어제 할일 목록 표시
- "어제 'OOO' 진행하셨나요?" 질문
- 사용자 답변에 따라 완료/미완료/이월 처리

## 데이터 소스별 수집 방법

### 노션 (Notion)
- `Notion:notion-search` 도구로 할일/태스크 관련 데이터베이스 검색
- 오늘 마감이거나 오늘 예정된 항목 필터링
- Status가 완료되지 않은 항목만 포함

### 슬랙 (Slack)  
- `Slack:slack_search_public` 도구로 나에게 멘션된 메시지 검색
- **검색 쿼리 (우선순위 순):**
  1. `<@YOUR_USER_ID> after:YYYY-MM-DD` (유저 ID 멘션 - 가장 정확)
  2. 결과 부족하면 `your_name after:YYYY-MM-DD` (이름 검색)
- ⚠️ `to:me`는 동작 안 함 - 사용하지 말 것
- **검색 결과 없으면 반드시 다른 쿼리로 재시도**
- 액션 아이템이 포함된 메시지 식별 (질문, 요청, 멘션)

### 구글 캘린더 (Google Calendar)
- `list_gcal_events` 도구로 오늘 일정 조회
- 미팅, 마감일, 리마인더 등 확인

### 사용자 입력
- 대화 중 사용자가 직접 언급한 할일 포함
- 이전 대화에서 언급된 태스크 참조 (memory 활용)

## 우선순위 분류 기준

| 우선순위 | 조건 |
|---------|------|
| 🔴 긴급 | 오늘 마감, 즉시 응답 필요한 슬랙 멘션 |
| 🟡 중요 | 이번 주 마감, 미팅 준비 필요 |
| 🟢 일반 | 마감 여유 있음, 진행 중인 작업 |

## 출력 포맷

```
📋 오늘의 할일 (YYYY-MM-DD 요일)

📊 어제 할일 현황
- [x] 완료된 할일 ← 노션 수정 확인됨 ✅
- [ ] 미완료 할일 ← 오늘로 이월 🔄
- [?] 확인 필요 항목

🔴 긴급
- [ ] 할일 내용 (출처: 노션/슬랙/캘린더)

🟡 중요  
- [ ] 할일 내용

🟢 일반
- [ ] 할일 내용

📅 오늘 일정
- HH:MM 미팅/이벤트 제목

❓ 확인이 필요해요:
"어제 'OOO' 진행하셨나요?"
```

## 커스터마이징 가이드

이 스킬을 본인 환경에 맞게 설정하려면:

1. **슬랙 유저 ID**: Line 59의 `YOUR_USER_ID`를 본인 슬랙 ID로 변경
2. **이름 검색**: Line 60의 `your_name`을 본인 이름/닉네임으로 변경
3. **팀/프로젝트 필터**: 아래 주의사항에 본인 담당 팀/프로젝트명 추가

## 주의사항

- **검색 결과 없으면 반드시 다른 쿼리로 재시도** - 한 번 실패로 포기하지 말 것
- 각 소스에서 데이터 수집 실패 시 해당 소스 건너뛰고 계속 진행
- 할일이 없는 카테고리는 출력에서 생략
- 사용자가 특정 소스만 요청하면 해당 소스만 조회 (예: "노션 할일만")
- 본인 담당 팀/프로젝트 문서만 필터링 (필요시 팀명 지정)
- 어제 할일이 없으면 "어제 할일 현황" 섹션 생략
- 사용자 답변 후 체크 상태 업데이트하여 대화에서 추적
